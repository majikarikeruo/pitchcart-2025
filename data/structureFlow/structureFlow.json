{
  "name": "StructureFlowSchema",
  "schema": {
    "type": "object",
    "properties": {
      "structure_flow": {
        "type": "object",
        "properties": {
          "edges": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "from_slide": {
                  "type": "number",
                  "description": "開始スライド番号"
                },
                "to_slide": {
                  "type": "number",
                  "description": "終了スライド番号"
                },
                "transition_issues": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "issue": {
                        "type": "string",
                        "description": "遷移時の問題点"
                      },
                      "current_content": {
                        "type": "string",
                        "description": "現在の接続部分の具体的な内容"
                      },
                      "suggestion": {
                        "type": "string",
                        "description": "改善提案（具体的な文言例を含む）"
                      },
                      "context": {
                        "type": "string",
                        "description": "なぜその遷移が問題なのかの文脈説明"
                      }
                    }
                  }
                }
              }
            }
          },
          "story_structure": {
            "type": "object",
            "properties": {
              "main_theme": {
                "type": "string",
                "description": "プレゼンテーション全体のメインテーマ"
              },
              "narrative_sections": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "enum": [
                        "setup",
                        "problem",
                        "solution",
                        "evidence",
                        "call_to_action"
                      ],
                      "description": "セクションの種類"
                    },
                    "slide_range": {
                      "type": "object",
                      "properties": {
                        "start": {
                          "type": "number",
                          "description": "開始スライド番号"
                        },
                        "end": {
                          "type": "number",
                          "description": "終了スライド番号"
                        }
                      }
                    },
                    "narrative_strength": {
                      "type": "number",
                      "minimum": 0,
                      "maximum": 100,
                      "description": "ストーリーとしての強さ"
                    },
                    "key_messages": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "description": "このセクションの主要なメッセージ"
                    }
                  }
                }
              }
            }
          }
        },
        "required": ["edges", "story_structure"]
      }
    }
  }
}
