# 要件定義書（新）
1. プロジェクト背景

PitchCartは「ピッチ資料や発表が相手にどう伝わるかを可視化する分析ツール」。

これまではスライド分析中心で、ChatGPTに資料を投げるだけでも似た結果が得られる問題があった。

差別化のために「疑似審査員（ペルソナ）による合議分析」を導入し、PitchCartならではの厚みを出したい。

2. ゴール

複数の擬似審査員が並列で評価し、合議サマリーを返すAPIを作る。

既存のReact/Next.js UIに組み込み、オーナーに「ChatGPTとは違う体験」をすぐ見せられる状態にする。

3. 必要な新機能（追加ポイント）

複数ペルソナ評価

VC / アクセラ審査員 / 早期ユーザーなど、役割ごとの視点を持つ。

各ペルソナは一人称でコメントし、スコアと根拠を提示する。

合議サマリー

一致点 / 対立点を抽出。

総合スコア（0–100）。

最優先TODO（3つ以内）。

改善シミュレーション（軽量版）

1〜2個の修正提案を出し、「+何点見込めるか」を表示。

静的アウトプット（MVP段階）

劇場型Q&Aはスコープ外。

まずは「静的な合議結果を返す」ことを優先する。

4. 非機能要件

速度：TTFB < 2秒、全体応答 < 12秒（3ペルソナ前提）。

堅牢性：

1ペルソナが失敗しても残り＋合議を返す。

JSON検証は厳格、失敗時はフォールバック値を返す。

拡張性：ペルソナ数や評価軸は設定ファイルで変更可能。

互換性：将来 LangGraph に置き換えても API入出力契約は固定。

5. API要件（フロント連携）

同期API /api/analyze：一括で合議結果を返す。

ストリーミングAPI /api/analyze/stream：SSEで逐次返す（ペルソナごと→合議）。

I/Oフォーマット：固定スキーマ（前回提示の AnalysisResponse 構造）。

6. 利用シナリオ（ユーザー体験）

ユーザーがスライド原稿をPitchCartにアップ。

APIが擬似審査員3名で並列評価。

UIには：

ペルソナ別のスコア・コメント・根拠

合議の一致点/対立点/総合スコア/最優先TODO

改善シミュレーション（「結論を先出し→+8点」など）
がカード形式で表示される。

👉 ユーザーは「自分のピッチがどこで伝わっていないか」を直感的に理解できる。

7. 成果物

Mastra/TypeScript 実装のバックエンドAPI（同期+SSE）。

.env.sample と README（起動・設定方法）。

サンプルレスポンスJSON（ダミーデータ）。

基本的なユニットテスト（スキーマ検証・フォールバック動作）。

8. 成功基準（Acceptance）

/api/analyze が仕様どおりのJSONを返す。

/api/analyze/stream がペルソナ→合議の順にイベント送出。

Persona設定をJSONで追加/削除でき、UIが追従。

1人欠けても合議が返る。

レスポンスが SLO (12秒以内) を満たす。